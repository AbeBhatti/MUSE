<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MÃœSE Workspace</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'bg-dark': '#0f1116',
            'panel-dark': '#1a1d23',
            'text-light': '#e5e7eb',
            'text-dim': '#9ca3af',
            'accent-blue': '#3b82f6',
            'accent-purple': '#8b5cf6',
            'border-dark': '#2a2e37'
          },
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
          }
        }
      }
    }
  </script>
  <script>
    (function redirectIfUnauthenticated() {
      const hasToken = Boolean(localStorage.getItem('idToken'));
      if (!hasToken) {
        const loginPage = 'login.html';
        const path = window.location.pathname || '';
        if (!path.endsWith(`/${loginPage}`) && !path.endsWith(loginPage)) {
          window.location.replace(`${loginPage}${window.location.search}${window.location.hash}`);
        }
      }
    })();
  </script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
    .doc-preview {
      background: linear-gradient(145deg, #1c1f26, #121419);
      border: 1px solid #2a2e37;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      box-shadow: 0 4px 10px rgba(0,0,0,0.25);
    }
    .doc-preview:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(59,130,246,0.25);
      border-color: rgba(59,130,246,0.6);
    }
    input, button {
      font-family: 'Inter', sans-serif;
    }
  </style>
</head>

<body class="bg-bg-dark text-text-light font-sans antialiased h-screen flex flex-col overflow-hidden">

  <!-- Top App Bar -->
  <header class="flex-shrink-0 bg-panel-dark border-b border-border-dark px-4 sm:px-6 lg:px-8 py-3 flex justify-between items-center shadow-lg">
    <div class="flex items-center space-x-6">
      <div class="text-xl font-bold text-text-light tracking-wide">MÃœSE</div>
      <div class="relative hidden md:block w-96">
        <input type="text" placeholder="Search your projects..." 
               class="w-full bg-[#111317] rounded-lg py-2 pl-10 pr-4 text-sm border border-border-dark focus:outline-none focus:ring-2 focus:ring-accent-blue text-text-light placeholder:text-dim">
        <svg xmlns="http://www.w3.org/2000/svg" 
             class="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-dim" 
             viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/>
        </svg>
      </div>
    </div>

    <div class="flex items-center space-x-4">
      <button onclick="createNewProject()" 
              class="bg-gradient-to-r from-accent-blue to-accent-purple text-white py-2 px-4 rounded-full 
                     font-semibold text-sm hover:opacity-90 transition shadow-md flex items-center space-x-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" 
             viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
          <path d="M12 5v14M5 12h14"/>
        </svg>
        <span class="hidden sm:inline">New Beat</span>
      </button>
    </div>
  </header>

  <div class="flex-grow flex overflow-hidden">
    
    <!-- Sidebar -->
    <nav class="flex-shrink-0 w-60 bg-panel-dark p-4 border-r border-border-dark overflow-y-auto hidden sm:block">
      <h3 class="text-xs font-semibold uppercase text-dim mb-4 tracking-wider">Navigation</h3>
      <ul class="space-y-1 text-sm">
        <li>
          <a href="#" class="flex items-center space-x-3 p-2 rounded-lg bg-accent-blue/10 text-accent-blue font-medium">
            My Projects
          </a>
        </li>
        <li>
          <a href="#" class="flex items-center space-x-3 p-2 rounded-lg text-dim hover:bg-[#22252c] transition">
            Shared with Me
          </a>
        </li>
        <li>
          <a href="#" class="flex items-center space-x-3 p-2 rounded-lg text-dim hover:bg-[#22252c] transition">
            Trash
          </a>
        </li>
      </ul>
    </nav>

    <!-- Main Workspace -->
    <main class="flex-grow overflow-y-auto p-6 sm:p-8 bg-bg-dark">
      
      <!-- Recent Projects -->
      <section class="mb-12">
        <h2 class="text-2xl font-bold text-text-light mb-6">Recent Projects</h2>
        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6">
          
          <div onclick="openEditor('neon-city')" class="rounded-xl overflow-hidden cursor-pointer doc-preview">
            <div class="w-full aspect-video bg-gradient-to-br from-purple-600 to-pink-500 flex items-center justify-center">
              <div class="text-white text-xs font-bold">ðŸŽµ Beat Pattern</div>
            </div>
            <div class="p-3">
              <h4 class="text-sm font-semibold truncate">Neon City - V4.2</h4>
              <p class="text-xs text-dim mt-1">Opened 2 mins ago</p>
            </div>
          </div>

          <div onclick="openEditor('lofi-chill')" class="rounded-xl overflow-hidden cursor-pointer doc-preview">
            <div class="w-full aspect-video bg-gradient-to-br from-blue-500 to-cyan-400 flex items-center justify-center">
              <div class="text-white text-xs font-bold">ðŸŽ¹ Lo-Fi Beat</div>
            </div>
            <div class="p-3">
              <h4 class="text-sm font-semibold truncate">Chill Study Beats</h4>
              <p class="text-xs text-dim mt-1">Yesterday</p>
            </div>
          </div>

          <div onclick="openEditor('trap-banger')" class="rounded-xl overflow-hidden cursor-pointer doc-preview">
            <div class="w-full aspect-video bg-gradient-to-br from-red-500 to-orange-400 flex items-center justify-center">
              <div class="text-white text-xs font-bold">ðŸ”¥ Trap Beat</div>
            </div>
            <div class="p-3">
              <h4 class="text-sm font-semibold truncate">808 Banger</h4>
              <p class="text-xs text-dim mt-1">3 days ago</p>
            </div>
          </div>
          
          <div onclick="createNewProject()" 
               class="rounded-xl overflow-hidden cursor-pointer border-2 border-dashed border-accent-blue/50 
                      flex items-center justify-center text-center p-4 hover:border-accent-blue transition bg-[#1b1e25]">
            <div class="text-accent-blue">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 mx-auto mb-2" 
                   viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 5v14M5 12h14"/>
              </svg>
              <p class="text-sm font-medium">New Beat</p>
            </div>
          </div>

        </div>
      </section>

    </main>
  </div>

  <script>
    function createNewProject() {
      // Generate a unique project ID
      const projectId = 'project_' + Date.now();
      const projectName = 'New Beat';

      // Store project info
      localStorage.setItem('currentProjectId', projectId);
      localStorage.setItem('currentProjectName', projectName);

      // Redirect to React workspace
      window.location.href = `workspace.html`;
    }

    function openEditor(projectId) {
      // When opening an existing project, go to workspace
      const projectName = projectId.replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
      localStorage.setItem('currentProjectId', projectId);
      localStorage.setItem('currentProjectName', projectName);

      window.location.href = `workspace.html`;
    }
  </script>
</body>
</html>
